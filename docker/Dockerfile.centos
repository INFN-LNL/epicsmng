FROM centos:latest

ENV PATH="${HOME:-/root}/.local/bin:${PATH}"

RUN yum install -y \
        git \
        readline-devel \
        gcc \
        gcc-c++ \
        make

COPY . /epicsmng

RUN sh /epicsmng/install.sh \
    && rm -rf /epicsmng \
    && echo "" >> ${HOME:-/root}/.config/epicsmng/settings/user.settings \
    && echo "base_url=\"https://github.com/epics-base/epics-base\"" >> ${HOME:-/root}/.config/epicsmng/settings/user.settings